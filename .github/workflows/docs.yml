name: Documentation Check

on:
  pull_request:
    branches: [ main ]
    paths:
      - '**.md'
      - 'docs/**'

jobs:
  markdown-lint:
    name: Markdown Linting
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Markdown Lint
        uses: articulate/actions-markdownlint@v1
        with:
          files: '**/*.md'
          ignore: 'node_modules'
        continue-on-error: true
      
      - name: Check for broken links
        uses: gaurav-nelson/github-action-markdown-link-check@v1
        with:
          use-quiet-mode: 'yes'
          config-file: '.github/markdown-link-check-config.json'
        continue-on-error: true

  check-readme-sync:
    name: Verify README Examples
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Set up uv
        uses: astral-sh/setup-uv@v5
      
      - name: Set up Python
        run: uv python install 3.12.4
      
      - name: Verify README commands are valid
        run: |
          # Extract bash commands from README and verify syntax
          grep -E "^\`\`\`bash" README.md -A 10 | grep "^uv run" > commands.txt || true
          if [ -s commands.txt ]; then
            echo "Found commands to validate"
          fi
